<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C H</title>
    <link rel="stylesheet" href="../css/shoppingCart.css">
</head>
<header>
    <div class="logo">
        <img src="../images/logo.jpg" alt="">
    </div>
    <div class="search">
        <button type="button"></button>
        <input type="text" placeholder="what are you looking for?">
    </div>
    <nav>
        <ul>
            <li><button type="button"><img src="../images/shopCar.png" alt=""></button></li>
            <li><button type="button"><img src="../images/user.png" alt=""></button></li>
            <li><button type="button"><img src="../images/news.png" alt=""></button></li>
            <li><button type="button"><img src="../images/living.png" alt=""></button></li>
            <li><button type="button"><img src="../images/list.png" alt=""></button></li>
        </ul>
    </nav>
</header>
<body>
    <section class="selected-show">
        <h1>Shopping cart</h1>
    </section>
    <section class="main-show">
        <div class="left">
            <h5><span>3 products</span> in the cart</h5>
            <ul>
                <li>
                    <div><img src="../images/Rectangle 1.png" alt=""></div>
                    <div class="right-show-text">
                        <div>
                            <h3>Living Room Swivel Chair</h3>
                            <p class="price">$1147.00</p>
                            <div class="bottom-show">
                                <div>
                                    <p class="circle-black">
                                    </p>&nbsp;
                                    <p>Black</p>
                                </div>
                                <p>Size:<span>38</span></p>
                            </div>
                            <div class="user-operation">
                                <button>-</button>
                                <input type="text" value="1">
                                <button>+</button>
                                <button class="delete"></button>
                            </div>
                        </div>
                    </div>
                </li>
                <li>
                    <div><img src="../images/Rectangle Copy 7.png" alt=""></div>
                    <div class="right-show-text">
                        <div>
                            <h3>Writing Chair</h3>
                            <p class="price">$650.99</p>
                            <div class="bottom-show">
                                <div>
                                    <p class="circle-brown">
                                    </p>&nbsp;
                                    <p>Brown</p>
                                </div>
                                <p>Size:<span>37</span></p>
                            </div>
                            <div class="user-operation">
                                <button>-</button>
                                <input type="text" value="1">
                                <button>+</button>
                                <button class="delete"></button>
                            </div>
                        </div>
                    </div>
                </li>
                <li>
                    <div><img src="../images/Rectangle 5.png" alt=""></div>
                    <div class="right-show-text">
                        <div>
                            <h3>Living Room Swivel Chair</h3>
                            <p class="price">$650.99</p>
                            <div class="bottom-show">
                                <div>
                                    <p class="circle-white">
                                    </p>&nbsp;
                                    <p>White</p>
                                </div>
                                <p>Size:<span>38</span></p>
                            </div>
                            <div class="user-operation">
                                <button>-</button>
                                <input type="text" value="1">
                                <button>+</button>
                                <button class="delete"></button>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="right">
            <label for="special" class="title-right">Special Instructions:</label>
            <textarea style="resize: none;" name="" id="special" cols="30" rows="13">
            </textarea>
            <div>
                <p class="title-right">Shipping to:</p>
                <div class="Shipping">
                    <div class="house"><img src="../images/house.png" alt=""></div>
                    <p>658 Yost ISland Apt<br><span>Seattle,US</span></p>
                    <img src="../images/good.png" alt="">
                </div>
            </div>
            <p class="tips">New Address?</p>
            <div class="pay-tital">
                <p class="title-right">Payment method:</p>
                <div class="pay-show">
                    <ul>
                        <li index="0">
                            <div>
                                <img src="../images/cc-visa.png" alt="">
                            </div>
                            <div>
                                <p>**** **** **** 3765</p>
                                <p>VISA</p>
                            </div>
                            <img class="selected-pay" src="../images/good.png" alt="">
                        </li>
                        <li index="1">
                            <div>
                                <img src="../images/cc-paypal.png" alt="">
                            </div>
                            <div>
                                <p>pfeffer_ellen@balistreri.net</p>
                                <p>Paypal</p>
                            </div>
                        </li>
                        <li index="2">
                            <div>
                                <img src="../images/cc-mastercard.png" alt="">
                            </div>
                            <div>
                                <p>**** **** **** 8562</p>
                                <p>Master Card</p>
                            </div>
                        </li>
                    </ul>
                </div>
                <p class="tips">Pay by Other Method?</p>
                <div class="details">
                    <p>Shipping fee<span>$6.99</span></p>
                    <p>Sub total<span>$2,944.99</span></p>
                    <p>Total<span>$2,951.98</span></p>
                    <button class="payfor">PAYMENT</button>
                </div>
            </div>
        </div>
    </section>
</body>
<script>
    var checkedButton = document.querySelectorAll('.checkedButton')
    for (let i = 0; i < checkedButton.length; i++) {
        checkedButton[i].addEventListener('click',function(){
            if(this.getAttribute('selected')=='true'){
                this.style.backgroundImage = "url(../images/selected.png)"
                this.setAttribute('selected','false')    
            }else{
                this.style.backgroundImage = "url(../images/checkbox.png)"
                this.setAttribute('selected','true')
            }
        })
    }


    var drop = document.querySelectorAll('.left-type-top')
    var ul = document.querySelectorAll('.left-type ul')
    for (let i = 0; i < drop.length; i++) {
        drop[i].addEventListener('click',function(){
            if(this.getAttribute('selected')=='true'){
                this.children[0].style.transform = 'rotate(-90deg)'
                this.setAttribute('selected','false')
                ul[this.getAttribute('index')].style.display = 'none'
            }else{
                this.children[0].style.transform = 'rotate(0deg)'
                this.setAttribute('selected','true')
                ul[this.getAttribute('index')].style.display = 'block'
            }
        })
    }
    var search = document.querySelector('.search input')
    search.addEventListener('click',function(){
        location.href = './fram.html'
    })


    var products = document.querySelectorAll('.left ul li')
    products[0].addEventListener('click',function(){
        location.href = './LivingRoomAdd.html'
    })

    var pay = document.querySelector('.payfor')
    pay.addEventListener('click',function(){
        location.href = './sucess.html'
    })

    var pay_show = document.querySelectorAll('.pay-show ul li')
    var selected_pay = document.querySelector('.selected-pay')
    for (let i = 0; i < pay_show.length; i++) {
        pay_show[i].addEventListener('click',function(){
            selected_pay.style.top = parseInt(this.getAttribute('index'))*110 + 40 + '%'
        })
        
    }
    /*delete items from product list*/
var removeFromCart = document.getElementsByClassName('delete');

for (var i = 0; i < removeFromCart.length; i++) {
  var button = removeFromCart[i];
  button.addEventListener('click', function(event) {
    var buttonClicked = event.target;
    buttonClicked.parentElement.parentElement.parentElement.remove();
    updateCartTotal();
  });
}

/*Function for calculating total price and total number of product */
function updateCartTotal() {
    var cartItemHolder = document.getElementsByClassName('All_Items')[0];
    var cartRows = cartItemHolder.getElementsByClassName('Item');
    var total = 0;
    var totalMoney = 0;
    var shippingFee = parseFloat(document.getElementsByClassName('Shipping_Fee')[0].innerText.replace('$',''));
/*total number of product */
    for (var i = 0; i < cartRows.length; i++) {
        var cartRow = cartRows[i];
        var quantity = cartRow.getElementsByClassName('Item_Num')[0];
        var quantityValue = parseInt(quantity.value);
        total += quantityValue;
    }
/*total price of product */
    for (var i = 0; i < cartRows.length; i++) {
        var cartRow = cartRows[i];
        var price = cartRow.getElementsByClassName('price')[0];
        var quantity = cartRow.getElementsByClassName('Item_Num')[0];
        var priceProduct = parseFloat(price.innerText.replace('$', ''));
        var quantityProduct = quantity.value;
        totalMoney += priceProduct * quantityProduct;
    }

    var totalSub = document.getElementsByClassName('Total_Sub')[0];
    var totalPrice = document.getElementsByClassName('Total_Price')[0];

    totalSub.innerText = '$' + totalMoney;
    totalPrice.innerText = '$' + (totalMoney + shippingFee);
    document.getElementsByClassName('Num_Product')[0].innerText = total + ' products';

    // Check if subtotal is 0, if it's 0 total will be 0
    if (totalMoney === 0) {
        totalPrice.innerText = '$0';
    }
}

/* plus and minus button */
var plusButtons = document.querySelectorAll('.Add');
var minusButtons = document.querySelectorAll('.Minus');

/*make plus sign work */
for (var i = 0; i < plusButtons.length; i++) {
  plusButtons[i].addEventListener('click', function() {
    var quantityInput = this.parentElement.querySelector('.Item_Num');
    var currentValue = parseInt(quantityInput.value);
    quantityInput.value = currentValue + 1;
    updateCartTotal();
  });
}

/*make minus sign work */
for (var i = 0; i < minusButtons.length; i++) {
  minusButtons[i].addEventListener('click', function() {
    var quantityInput = this.parentElement.querySelector('.Item_Num');
    var currentValue = parseInt(quantityInput.value);
    if (currentValue > 1) {
      quantityInput.value = currentValue - 1;
      updateCartTotal();
    }
  });
}

/* add event listener*/
var quantityInputs = document.getElementsByClassName('Item_Num');
for (var i = 0; i < quantityInputs.length; i++) {
  var input = quantityInputs[i];
  input.addEventListener('change', updateCartTotal);
}

/* Update the function */
updateCartTotal();


var checkedButton = document.querySelectorAll('.checkedButton')
for (let i = 0; i < checkedButton.length; i++) {
    checkedButton[i].addEventListener('click',function(){
        if(this.getAttribute('selected')=='true'){
            this.style.backgroundImage = "url(img/selected.png)"
            this.setAttribute('selected','false')    
        }else{
            this.style.backgroundImage = "url(img/checkbox.png)"
            this.setAttribute('selected','true')
        }
    })
}


var drop = document.querySelectorAll('.left-type-top')
var ul = document.querySelectorAll('.left-type ul')
for (let i = 0; i < drop.length; i++) {
    drop[i].addEventListener('click',function(){
        if(this.getAttribute('selected')=='true'){
            this.children[0].style.transform = 'rotate(-90deg)'
            this.setAttribute('selected','false')
            ul[this.getAttribute('index')].style.display = 'none'
        }else{
            this.children[0].style.transform = 'rotate(0deg)'
            this.setAttribute('selected','true')
            ul[this.getAttribute('index')].style.display = 'block'
        }
    })
}

var pay_show = document.querySelectorAll('.pay-show ul li')
var selected_pay = document.querySelector('.selected-pay')
for (let i = 0; i < pay_show.length; i++) {
    pay_show[i].addEventListener('click',function(){
        selected_pay.style.top = parseInt(this.getAttribute('index'))*110 + 40 + '%'
    })
    
}
</script>
</html>
